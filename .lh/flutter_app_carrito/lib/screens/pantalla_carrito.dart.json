{
    "sourceFile": "flutter_app_carrito/lib/screens/pantalla_carrito.dart",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 7,
            "patches": [
                {
                    "date": 1763719128942,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1763719673616,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -28,9 +28,9 @@\n \n   @override\n   Widget build(BuildContext context) {\n     return Scaffold(\n-      appBar: const AppBarComun(),\n+      appBar: const AppBarComun(titulo: 'Mi Carrito'),\n       body: Column(\n         children: [\n           Expanded(\n             child: ListView.builder(\n"
                },
                {
                    "date": 1763806898247,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,104 @@\n+import '../models/articulo_carrito.dart';\n+import '../data/datos_ejemplo.dart';\n+import '../widgets/app_bar_comun.dart';\n+import 'package:flutter/material.dart';\n+\n+// Pantalla que muestra el contenido del carrito de compras.\n+class PantallaCarrito extends StatefulWidget {\n+  const PantallaCarrito({super.key});\n+\n+  @override\n+  _PantallaCarritoState createState() => _PantallaCarritoState();\n+}\n+\n+class _PantallaCarritoState extends State<PantallaCarrito> {\n+  // Datos de ejemplo para el carrito\n+  final List<ArticuloCarrito> _articulosCarrito = [\n+    ArticuloCarrito(producto: productosEjemplo[0], cantidad: 2),\n+    ArticuloCarrito(producto: productosEjemplo[1], cantidad: 1),\n+  ];\n+\n+  // Calcula el precio total de los artículos en el carrito.\n+  double get _precioTotal {\n+    return _articulosCarrito.fold(\n+      0,\n+      (sum, item) => sum + (item.producto.precio * item.cantidad),\n+    );\n+  }\n+\n+  @override\n+  Widget build(BuildContext context) {\n+    return Scaffold(\n+      appBar: const AppBarComun(),\n+      body: Column(\n+        children: [\n+          Expanded(\n+            child: ListView.builder(\n+              itemCount: _articulosCarrito.length,\n+              itemBuilder: (context, index) {\n+                final item = _articulosCarrito[index];\n+                return ListTile(\n+                  leading: Image.network(\n+                    item.producto.imagenUrl,\n+                    width: 50,\n+                    height: 50,\n+                    fit: BoxFit.cover,\n+                  ),\n+                  title: Text(item.producto.nombre),\n+                  subtitle: Text('Cantidad: ${item.cantidad}'),\n+                  trailing: Row(\n+                    mainAxisSize: MainAxisSize.min,\n+                    children: [\n+                      Text(\n+                        '\\$${(item.producto.precio * item.cantidad).toStringAsFixed(2)}',\n+                      ),\n+                      IconButton(\n+                        icon: const Icon(Icons.delete, color: Colors.red),\n+                        onPressed: () {\n+                          // La lógica para eliminar se implementará en la Fase 2.\n+                        },\n+                      ),\n+                    ],\n+                  ),\n+                );\n+              },\n+            ),\n+          ),\n+          // Muestra el resumen del precio total.\n+          Padding(\n+            padding: const EdgeInsets.all(16.0),\n+            child: Row(\n+              mainAxisAlignment: MainAxisAlignment.spaceBetween,\n+              children: [\n+                Text(\n+                  'Total:',\n+                  style: Theme.of(context).textTheme.headlineSmall,\n+                ),\n+                Text(\n+                  '\\$${_precioTotal.toStringAsFixed(2)}',\n+                  style: Theme.of(context).textTheme.headlineSmall,\n+                ),\n+              ],\n+            ),\n+          ),\n+          // Botón para aprobar el pedido.\n+          Padding(\n+            padding: const EdgeInsets.symmetric(\n+              horizontal: 16.0,\n+              vertical: 8.0,\n+            ),\n+            child: SizedBox(\n+              width: double.infinity,\n+              child: ElevatedButton(\n+                onPressed: () {\n+                  // La lógica de aprobación se implementará en fases posteriores.\n+                },\n+                child: const Text('Aprobar Pedido'),\n+              ),\n+            ),\n+          ),\n+        ],\n+      ),\n+    );\n+  }\n+}\n"
                },
                {
                    "date": 1763806979234,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -7,9 +7,9 @@\n class PantallaCarrito extends StatefulWidget {\n   const PantallaCarrito({super.key});\n \n   @override\n-  _PantallaCarritoState createState() => _PantallaCarritoState();\n+  State<PantallaCarrito> createState() => _PantallaCarritoState();\n }\n \n class _PantallaCarritoState extends State<PantallaCarrito> {\n   // Datos de ejemplo para el carrito\n"
                },
                {
                    "date": 1763811703151,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,6 +1,6 @@\n import '../models/articulo_carrito.dart';\n-import '../data/datos_ejemplo.dart';\n+import '../models/producto.dart';\n import '../widgets/app_bar_comun.dart';\n import 'package:flutter/material.dart';\n \n // Pantalla que muestra el contenido del carrito de compras.\n@@ -13,10 +13,25 @@\n \n class _PantallaCarritoState extends State<PantallaCarrito> {\n   // Datos de ejemplo para el carrito\n   final List<ArticuloCarrito> _articulosCarrito = [\n-    ArticuloCarrito(producto: productosEjemplo[0], cantidad: 2),\n-    ArticuloCarrito(producto: productosEjemplo[1], cantidad: 1),\n+    ArticuloCarrito(\n+      producto: Producto(\n+        nombre: 'Camiseta Clásica',\n+        precio: 19.99,\n+        descripcion: 'Camiseta de algodón 100% de alta calidad.',\n+        imagenUrl: 'https://picsum.photos/seed/picsum1/400/400',\n+      ),\n+      cantidad: 2,\n+    ),\n+    ArticuloCarrito(\n+      producto: Producto(\n+          nombre: 'Vaqueros Slim Fit',\n+          precio: 49.99,\n+          descripcion: 'Vaqueros modernos y cómodos para cualquier ocasión.',\n+          imagenUrl: 'https://picsum.photos/seed/picsum2/400/400'),\n+      cantidad: 1,\n+    ),\n   ];\n \n   // Calcula el precio total de los artículos en el carrito.\n   double get _precioTotal {\n"
                },
                {
                    "date": 1763811719787,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -24,12 +24,13 @@\n       cantidad: 2,\n     ),\n     ArticuloCarrito(\n       producto: Producto(\n-          nombre: 'Vaqueros Slim Fit',\n-          precio: 49.99,\n-          descripcion: 'Vaqueros modernos y cómodos para cualquier ocasión.',\n-          imagenUrl: 'https://picsum.photos/seed/picsum2/400/400'),\n+        nombre: 'Vaqueros Slim Fit',\n+        precio: 49.99,\n+        descripcion: 'Vaqueros modernos y cómodos para cualquier ocasión.',\n+        imagenUrl: 'https://picsum.photos/seed/picsum2/400/400',\n+      ),\n       cantidad: 1,\n     ),\n   ];\n \n@@ -116,108 +117,4 @@\n       ),\n     );\n   }\n }\n-import '/models/articulo_carrito.dart';\n-import '/data/datos_ejemplo.dart';\n-import '/widgets/app_bar_comun.dart';\n-import 'package:flutter/material.dart';\n-\n-// Pantalla que muestra el contenido del carrito de compras.\n-class PantallaCarrito extends StatefulWidget {\n-  const PantallaCarrito({super.key});\n-\n-  @override\n-  _PantallaCarritoState createState() => _PantallaCarritoState();\n-}\n-\n-class _PantallaCarritoState extends State<PantallaCarrito> {\n-  // Datos de ejemplo para el carrito\n-  final List<ArticuloCarrito> _articulosCarrito = [\n-    ArticuloCarrito(producto: productosEjemplo[0], cantidad: 2),\n-    ArticuloCarrito(producto: productosEjemplo[1], cantidad: 1),\n-  ];\n-\n-  // Calcula el precio total de los artículos en el carrito.\n-  double get _precioTotal {\n-    return _articulosCarrito.fold(\n-      0,\n-      (sum, item) => sum + (item.producto.precio * item.cantidad),\n-    );\n-  }\n-\n-  @override\n-  Widget build(BuildContext context) {\n-    return Scaffold(\n-      appBar: const AppBarComun(titulo: 'Mi Carrito'),\n-      body: Column(\n-        children: [\n-          Expanded(\n-            child: ListView.builder(\n-              itemCount: _articulosCarrito.length,\n-              itemBuilder: (context, index) {\n-                final item = _articulosCarrito[index];\n-                return ListTile(\n-                  leading: Image.network(\n-                    item.producto.imagenUrl,\n-                    width: 50,\n-                    height: 50,\n-                    fit: BoxFit.cover,\n-                  ),\n-                  title: Text(item.producto.nombre),\n-                  subtitle: Text('Cantidad: ${item.cantidad}'),\n-                  trailing: Row(\n-                    mainAxisSize: MainAxisSize.min,\n-                    children: [\n-                      Text(\n-                        '\\$${(item.producto.precio * item.cantidad).toStringAsFixed(2)}',\n-                      ),\n-                      IconButton(\n-                        icon: const Icon(Icons.delete, color: Colors.red),\n-                        onPressed: () {\n-                          // La lógica para eliminar se implementará en la Fase 2.\n-                        },\n-                      ),\n-                    ],\n-                  ),\n-                );\n-              },\n-            ),\n-          ),\n-          // Muestra el resumen del precio total.\n-          Padding(\n-            padding: const EdgeInsets.all(16.0),\n-            child: Row(\n-              mainAxisAlignment: MainAxisAlignment.spaceBetween,\n-              children: [\n-                Text(\n-                  'Total:',\n-                  style: Theme.of(context).textTheme.headlineSmall,\n-                ),\n-                Text(\n-                  '\\$${_precioTotal.toStringAsFixed(2)}',\n-                  style: Theme.of(context).textTheme.headlineSmall,\n-                ),\n-              ],\n-            ),\n-          ),\n-          // Botón para aprobar el pedido.\n-          Padding(\n-            padding: const EdgeInsets.symmetric(\n-              horizontal: 16.0,\n-              vertical: 8.0,\n-            ),\n-            child: SizedBox(\n-              width: double.infinity,\n-              child: ElevatedButton(\n-                onPressed: () {\n-                  // La lógica de aprobación se implementará en fases posteriores.\n-                },\n-                child: const Text('Aprobar Pedido'),\n-              ),\n-            ),\n-          ),\n-        ],\n-      ),\n-    );\n-  }\n-}\n"
                },
                {
                    "date": 1763812860791,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,66 +1,40 @@\n-import '../models/articulo_carrito.dart';\n-import '../models/producto.dart';\n+import 'package:flutter_riverpod/flutter_riverpod.dart';\n+\n+import '../providers/carrito_provider.dart';\n import '../widgets/app_bar_comun.dart';\n import 'package:flutter/material.dart';\n \n // Pantalla que muestra el contenido del carrito de compras.\n-class PantallaCarrito extends StatefulWidget {\n+class PantallaCarrito extends ConsumerWidget {\n   const PantallaCarrito({super.key});\n \n   @override\n-  State<PantallaCarrito> createState() => _PantallaCarritoState();\n-}\n-\n-class _PantallaCarritoState extends State<PantallaCarrito> {\n-  // Datos de ejemplo para el carrito\n-  final List<ArticuloCarrito> _articulosCarrito = [\n-    ArticuloCarrito(\n-      producto: Producto(\n-        nombre: 'Camiseta Clásica',\n-        precio: 19.99,\n-        descripcion: 'Camiseta de algodón 100% de alta calidad.',\n-        imagenUrl: 'https://picsum.photos/seed/picsum1/400/400',\n-      ),\n-      cantidad: 2,\n-    ),\n-    ArticuloCarrito(\n-      producto: Producto(\n-        nombre: 'Vaqueros Slim Fit',\n-        precio: 49.99,\n-        descripcion: 'Vaqueros modernos y cómodos para cualquier ocasión.',\n-        imagenUrl: 'https://picsum.photos/seed/picsum2/400/400',\n-      ),\n-      cantidad: 1,\n-    ),\n-  ];\n-\n-  // Calcula el precio total de los artículos en el carrito.\n-  double get _precioTotal {\n-    return _articulosCarrito.fold(\n+  Widget build(BuildContext context, WidgetRef ref) {\n+    final articulosCarrito = ref.watch(carritoProvider);\n+    final precioTotal = articulosCarrito.fold(\n       0,\n       (sum, item) => sum + (item.producto.precio * item.cantidad),\n     );\n-  }\n-\n-  @override\n-  Widget build(BuildContext context) {\n     return Scaffold(\n       appBar: const AppBarComun(),\n       body: Column(\n         children: [\n           Expanded(\n             child: ListView.builder(\n-              itemCount: _articulosCarrito.length,\n+              itemCount: articulosCarrito.length,\n               itemBuilder: (context, index) {\n-                final item = _articulosCarrito[index];\n+                final item = articulosCarrito[index];\n                 return ListTile(\n-                  leading: Image.network(\n-                    item.producto.imagenUrl,\n-                    width: 50,\n-                    height: 50,\n-                    fit: BoxFit.cover,\n-                  ),\n+                  leading: (item.producto.imagenUrl != null &&\n+                          item.producto.imagenUrl!.isNotEmpty)\n+                      ? Image.network(\n+                          item.producto.imagenUrl!,\n+                          width: 50,\n+                          height: 50,\n+                          fit: BoxFit.cover,\n+                        )\n+                      : const Icon(Icons.image_not_supported, size: 50),\n                   title: Text(item.producto.nombre),\n                   subtitle: Text('Cantidad: ${item.cantidad}'),\n                   trailing: Row(\n                     mainAxisSize: MainAxisSize.min,\n@@ -70,9 +44,11 @@\n                       ),\n                       IconButton(\n                         icon: const Icon(Icons.delete, color: Colors.red),\n                         onPressed: () {\n-                          // La lógica para eliminar se implementará en la Fase 2.\n+                          ref\n+                              .read(carritoProvider.notifier)\n+                              .eliminarProducto(item.producto.nombre);\n                         },\n                       ),\n                     ],\n                   ),\n@@ -90,9 +66,9 @@\n                   'Total:',\n                   style: Theme.of(context).textTheme.headlineSmall,\n                 ),\n                 Text(\n-                  '\\$${_precioTotal.toStringAsFixed(2)}',\n+                  '\\$${precioTotal.toStringAsFixed(2)}',\n                   style: Theme.of(context).textTheme.headlineSmall,\n                 ),\n               ],\n             ),\n"
                },
                {
                    "date": 1763815447706,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -11,9 +11,9 @@\n   @override\n   Widget build(BuildContext context, WidgetRef ref) {\n     final articulosCarrito = ref.watch(carritoProvider);\n     final precioTotal = articulosCarrito.fold(\n-      0,\n+      0.0,\n       (sum, item) => sum + (item.producto.precio * item.cantidad),\n     );\n     return Scaffold(\n       appBar: const AppBarComun(),\n"
                }
            ],
            "date": 1763719128942,
            "name": "Commit-0",
            "content": "import '/models/articulo_carrito.dart';\nimport '/data/datos_ejemplo.dart';\nimport '/widgets/app_bar_comun.dart';\nimport 'package:flutter/material.dart';\n\n// Pantalla que muestra el contenido del carrito de compras.\nclass PantallaCarrito extends StatefulWidget {\n  const PantallaCarrito({super.key});\n\n  @override\n  _PantallaCarritoState createState() => _PantallaCarritoState();\n}\n\nclass _PantallaCarritoState extends State<PantallaCarrito> {\n  // Datos de ejemplo para el carrito\n  final List<ArticuloCarrito> _articulosCarrito = [\n    ArticuloCarrito(producto: productosEjemplo[0], cantidad: 2),\n    ArticuloCarrito(producto: productosEjemplo[1], cantidad: 1),\n  ];\n\n  // Calcula el precio total de los artículos en el carrito.\n  double get _precioTotal {\n    return _articulosCarrito.fold(\n      0,\n      (sum, item) => sum + (item.producto.precio * item.cantidad),\n    );\n  }\n\n  @override\n  Widget build(BuildContext context) {\n    return Scaffold(\n      appBar: const AppBarComun(),\n      body: Column(\n        children: [\n          Expanded(\n            child: ListView.builder(\n              itemCount: _articulosCarrito.length,\n              itemBuilder: (context, index) {\n                final item = _articulosCarrito[index];\n                return ListTile(\n                  leading: Image.network(\n                    item.producto.imagenUrl,\n                    width: 50,\n                    height: 50,\n                    fit: BoxFit.cover,\n                  ),\n                  title: Text(item.producto.nombre),\n                  subtitle: Text('Cantidad: ${item.cantidad}'),\n                  trailing: Row(\n                    mainAxisSize: MainAxisSize.min,\n                    children: [\n                      Text(\n                        '\\$${(item.producto.precio * item.cantidad).toStringAsFixed(2)}',\n                      ),\n                      IconButton(\n                        icon: const Icon(Icons.delete, color: Colors.red),\n                        onPressed: () {\n                          // La lógica para eliminar se implementará en la Fase 2.\n                        },\n                      ),\n                    ],\n                  ),\n                );\n              },\n            ),\n          ),\n          // Muestra el resumen del precio total.\n          Padding(\n            padding: const EdgeInsets.all(16.0),\n            child: Row(\n              mainAxisAlignment: MainAxisAlignment.spaceBetween,\n              children: [\n                Text(\n                  'Total:',\n                  style: Theme.of(context).textTheme.headlineSmall,\n                ),\n                Text(\n                  '\\$${_precioTotal.toStringAsFixed(2)}',\n                  style: Theme.of(context).textTheme.headlineSmall,\n                ),\n              ],\n            ),\n          ),\n          // Botón para aprobar el pedido.\n          Padding(\n            padding: const EdgeInsets.symmetric(\n              horizontal: 16.0,\n              vertical: 8.0,\n            ),\n            child: SizedBox(\n              width: double.infinity,\n              child: ElevatedButton(\n                onPressed: () {\n                  // La lógica de aprobación se implementará en fases posteriores.\n                },\n                child: const Text('Aprobar Pedido'),\n              ),\n            ),\n          ),\n        ],\n      ),\n    );\n  }\n}\n"
        }
    ]
}